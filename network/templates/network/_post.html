<div class="card mb-3">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h6 class="card-title mb-1">
                    <a href="{% url 'profile' post.user.username %}" class="text-decoration-none">
                        <strong>{{ post.user.username }}</strong>
                    </a>
                </h6>
                <small class="text-muted">{{ post.timestamp }}</small>
            </div>
            {% if user == post.user %}
                <button class="btn btn-sm btn-outline-secondary edit-btn" data-post-id="{{ post.id }}">
                    Edit
                </button>
            {% endif %}
        </div>
        
        <div class="post-content mt-2" id="post-content-{{ post.id }}">
            {{ post.content }}
        </div>
        
        <div class="post-edit-form" id="post-edit-{{ post.id }}" style="display: none;">
            <textarea class="form-control mb-2" id="edit-content-{{ post.id }}">{{ post.content }}</textarea>
            <button class="btn btn-sm btn-success save-btn" data-post-id="{{ post.id }}">Save</button>
            <button class="btn btn-sm btn-secondary cancel-btn" data-post-id="{{ post.id }}">Cancel</button>
        </div>
        
        <div class="mt-3">
            {% if user.is_authenticated %}
                <button class="btn btn-sm like-btn {% if user in post.likes.all %}btn-danger{% else %}btn-outline-danger{% endif %}" 
                        data-post-id="{{ post.id }}">
                    ❤️ <span class="like-count">{{ post.like_count }}</span>
                </button>
            {% else %}
                <span class="text-muted">❤️ {{ post.like_count }}</span>
            {% endif %}
        </div>
    </div>
</div>